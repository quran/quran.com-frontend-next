@use 'src/styles/breakpoints';
@use 'src/styles/constants';
@use 'sass:map';

$calligraphy-offset: -0.875rem;
$container-min-height: 200px;
$line-height-relaxed: 1.6;

.headerContainer {
  display: flex;
  flex-direction: column;
  gap: var(--spacing-xsmall);
  padding-block: var(--spacing-large-px);
  border-block-end: var(--spacing-hairline-px) solid var(--color-separators-new);
}

.options {
  display: flex;
  gap: var(--spacing-medium2-px);
  margin-block: var(--spacing-medium2-px);
}

.calligraphyContainer {
  max-inline-size: max-content;

  // The calligraphy SVG has a lot of whitespace on the left side in LTR, so we shift it left to visually center it.
  // If we applied this transform in RTL, it would shift the calligraphy further to the right, increasing whitespace on the right
  // and misaligning the calligraphy away from the main content. Therefore, only apply this transform for LTR layouts.
  :global([dir='ltr']) & {
    transform: translateX($calligraphy-offset);
  }
}

.surahName {
  font-size: var(--font-size-large2);
  font-weight: var(--font-weight-bold);
  color: var(--color-text-default-new);
}

.detailsContainer {
  display: flex;
  color: var(--color-text-default-new);
  font-size: var(--font-size-normal);
  gap: var(--spacing-medium);
}

.detailItem {
  display: flex;
  flex-direction: row;
  align-items: baseline;
  gap: var(--spacing-xxsmall);
}

.detailHeader {
  font-weight: var(--font-weight-bold);
}

.descriptionContainer {
  color: var(--color-text-default-new);

  p,
  h2,
  h3,
  li,
  em {
    line-height: $line-height-relaxed;
  }

  @include breakpoints.tablet {
    /**
    * Adds a small inline-end padding to create visual spacing
    * between the content and the scrollbar.
    */
    padding-inline-end: var(--spacing-xxsmall);
  }

  @include breakpoints.smallerThanTablet {
    margin-block-end: var(--spacing-max);
  }

  p {
    margin-block-end: var(--spacing-medium3-px);
  }

  h2,
  h3 {
    font-weight: var(--font-weight-bold);
    margin-block-end: var(--spacing-medium3-px);
  }

  em {
    font-style: italic;
  }

  ol {
    display: block;
    list-style-type: decimal;
    margin-block-end: var(--spacing-medium);
    padding-inline-start: calc(2 * var(--spacing-large));
  }

  li {
    display: list-item;
    margin-block-end: var(--spacing-xxsmall);
  }

  & > *:last-child {
    margin-block-end: 0;
  }
}

.statusContainer {
  display: flex;
  justify-content: center;
  align-items: center;
  min-block-size: $container-min-height;
  padding-block: var(--spacing-large);
}

div {
  &.bottomSheetOnDesktopOverlay {
    @include breakpoints.tablet {
      overflow-y: hidden;
      align-items: flex-end;
      justify-items: center;
      padding-block-start: 0;
      padding-block-end: 0;
    }
  }
}

div {
  &.bottomSheetOnDesktopContent {
    @include breakpoints.tablet {
      border-radius: var(--border-radius-rounded) var(--border-radius-rounded) 0 0;
      block-size: 95vh;
      display: flex;
      flex-direction: column;
      overflow: hidden;
      margin-block-end: 0;
      padding-block-end: 0;
    }
  }
}

div {
  &.surahInfoModalContent {
    @include breakpoints.tablet {
      flex: 1;
      min-block-size: 0;
      overflow-y: auto;
      padding-block-end: calc(1.5 * var(--spacing-mega));
    }
  }
}

.bottomSheetOnDesktopInnerContent {
  @include breakpoints.tablet {
    /**
    * Acts as a non-scrollable flex container so that
    * scrollability is delegated to its inner content.
    */
    min-block-size: 0;
    display: flex;
    flex-direction: column;
  }
}

.resourceTabs {
  display: flex;
  gap: var(--spacing-small2-px);
  overflow-x: auto;

  &::-webkit-scrollbar {
    block-size: var(--spacing-xxsmall-px);
  }

  & > :last-child {
    margin-inline-end: var(--spacing-micro-px);
  }
}

.resourceTab {
  all: unset;

  display: flex;
  align-items: center;
  justify-content: center;
  white-space: nowrap;
  cursor: pointer;
  block-size: calc(var(--spacing-small-plus-px) * 4);
  padding-inline: var(--spacing-medium-px);
  border-radius: var(--border-radius-pill);
  background-color: var(--color-background-alternative-faint);
  color: var(--color-text-default-new);
  line-height: 1;
  font-weight: var(--font-weight-medium);
  font-size: var(--font-size-small);
  transition: background-color var(--transition-fast), transform var(--transition-fast);

  &:where(:hover, :focus-visible, [aria-selected='true'], &.resourceTabActive):not(:disabled) {
    background-color: var(--color-success-medium);
    color: var(--color-text-white);
  }

  &:active:not(:disabled) {
    transform: scale(constants.$button-active-scale);
  }
}

$surah-info-scales: (
  tablet: (
    1: 0.85rem,
    2: 1.1rem,
    3: 1.2rem,
    4: 1.4rem,
    5: 2rem,
    6: 2.3rem,
    7: 2.7rem,
    8: 3rem,
    9: 3.5rem,
    10: 4rem,
  ),
  mobile: (
    1: 0.85rem,
    2: 0.95rem,
    3: 1.1rem,
    4: 1.2rem,
    5: 1.4rem,
    6: 1.8rem,
    7: 2.1rem,
    8: 2.4rem,
    9: 2.75rem,
    10: 3rem,
  ),
);

@for $i from 1 through 10 {
  .surahInfo-font-size-#{$i} {
    --surah-info-font-size: #{map-get(map-get($surah-info-scales, mobile), $i)};
    font-size: var(--surah-info-font-size);

    @include breakpoints.tablet {
      --surah-info-font-size: #{map-get(map-get($surah-info-scales, tablet), $i)};
      font-size: var(--surah-info-font-size);
    }
  }
}
